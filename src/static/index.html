<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>API de Gera√ß√£o de Contesta√ß√£o Jur√≠dica</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f9f9f9; }
        .container { background: #fff; padding: 40px; border-radius: 8px; box-shadow: 0 0 15px #ddd; max-width: 700px; margin: 0 auto; }
        .preview { background: #f5f5f5; border: 1px solid #e3e3e3; padding: 10px; border-radius: 4px; margin: 10px 0; font-family: monospace; white-space: pre-wrap; }
    </style>
</head>
<body>
<div class="container">
    <h1>üèõÔ∏è API de Gera√ß√£o de Contesta√ß√£o Jur√≠dica</h1>
    <input type="file" id="pdfFile" accept=".pdf">
    <button onclick="uploadPDF()">Analisar PDF</button>
    <div id="uploadResult"></div>
</div>

<script>
async function uploadPDF() {
    const fileInput = document.getElementById('pdfFile');
    const file = fileInput.files[0];
    if (!file) {
        showResult('Por favor, selecione um arquivo PDF.');
        return;
    }
    const formData = new FormData();
    formData.append('file', file);
    try {
        const response = await fetch('/api/upload', {
            method: 'POST',
            body: formData
        });
        const result = await response.json();
        let dados = result.dados_extraidos;
        let message = '';
        message += `‚Ä¢ <b>Tipo de a√ß√£o:</b> ${dados.tipo_acao || 'N√£o identificado'}<br>`;
        message += `‚Ä¢ <b>Valor da causa:</b> ${dados.valor_causa || 'N√£o identificado'}<br>`;
        message += `‚Ä¢ <b>Autor:</b> ${dados.autor || 'N√£o identificado'}<br>`;
        message += `‚Ä¢ <b>R√©u:</b> ${dados.reu || 'N√£o identificado'}<br>`;

        if (dados.fatos) {
            message += `<br><b>Resumo dos Fatos:</b><br><div class='preview'>${dados.fatos}</div>`;
        }
        if (dados.pedidos && dados.pedidos.length > 0) {
            message += `<br><b>Pedidos do Autor:</b><ul>`;
            dados.pedidos.forEach(p => message += `<li>${p}</li>`);
            message += `</ul>`;
        }
        if (dados.fundamentos_juridicos && dados.fundamentos_juridicos.length > 0) {
            message += `<br><b>Fundamentos Jur√≠dicos:</b><ul>`;
            dados.fundamentos_juridicos.forEach(f => message += `<li>${f}</li>`);
            message += `</ul>`;
        }
        showResult(message);
    } catch (error) {
        showResult('Erro ao processar o PDF: ' + error);
    }
}

function showResult(msg) {
    document.getElementById('uploadResult').innerHTML = '<div class="preview">' + msg + '</div>';
}
</script>
</body>
</html>
